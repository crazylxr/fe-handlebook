<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>词法环境、执行上下文、作用域、闭包 | 前端桃园手册</title>
    <meta name="description" content="让前端变得更简单">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/assets/css/0.styles.b1cbcfde.css" as="style"><link rel="preload" href="/assets/js/app.4b1516c6.js" as="script"><link rel="preload" href="/assets/js/2.4455a399.js" as="script"><link rel="preload" href="/assets/js/11.2684930f.js" as="script"><link rel="prefetch" href="/assets/js/10.342c20f7.js"><link rel="prefetch" href="/assets/js/12.b06cc777.js"><link rel="prefetch" href="/assets/js/13.22cf5677.js"><link rel="prefetch" href="/assets/js/14.d8c082b5.js"><link rel="prefetch" href="/assets/js/15.298c3c45.js"><link rel="prefetch" href="/assets/js/16.5345eec5.js"><link rel="prefetch" href="/assets/js/17.87f50e28.js"><link rel="prefetch" href="/assets/js/18.218e8def.js"><link rel="prefetch" href="/assets/js/19.6111b019.js"><link rel="prefetch" href="/assets/js/20.42203713.js"><link rel="prefetch" href="/assets/js/21.9ea8e678.js"><link rel="prefetch" href="/assets/js/22.9e6b5696.js"><link rel="prefetch" href="/assets/js/23.ce5a1dcf.js"><link rel="prefetch" href="/assets/js/24.7728094a.js"><link rel="prefetch" href="/assets/js/25.9c5b34d0.js"><link rel="prefetch" href="/assets/js/26.cc457d7a.js"><link rel="prefetch" href="/assets/js/27.a1f5e3cd.js"><link rel="prefetch" href="/assets/js/28.256d4fff.js"><link rel="prefetch" href="/assets/js/29.2f6f3c59.js"><link rel="prefetch" href="/assets/js/3.ee8f4971.js"><link rel="prefetch" href="/assets/js/30.a426a340.js"><link rel="prefetch" href="/assets/js/31.a24d6c4d.js"><link rel="prefetch" href="/assets/js/32.e9c40861.js"><link rel="prefetch" href="/assets/js/33.56b6d2d0.js"><link rel="prefetch" href="/assets/js/34.50b4ffde.js"><link rel="prefetch" href="/assets/js/35.1f83ac9c.js"><link rel="prefetch" href="/assets/js/36.19144546.js"><link rel="prefetch" href="/assets/js/37.aefe1b94.js"><link rel="prefetch" href="/assets/js/38.e3b14993.js"><link rel="prefetch" href="/assets/js/39.43b42f39.js"><link rel="prefetch" href="/assets/js/4.42eb01a9.js"><link rel="prefetch" href="/assets/js/40.ba59c2e6.js"><link rel="prefetch" href="/assets/js/41.c6dcbe49.js"><link rel="prefetch" href="/assets/js/42.a178911b.js"><link rel="prefetch" href="/assets/js/43.031edee8.js"><link rel="prefetch" href="/assets/js/44.3eb861f0.js"><link rel="prefetch" href="/assets/js/45.d6fae1b5.js"><link rel="prefetch" href="/assets/js/46.a7cdfef9.js"><link rel="prefetch" href="/assets/js/47.a21bd9f6.js"><link rel="prefetch" href="/assets/js/48.8e4b2a78.js"><link rel="prefetch" href="/assets/js/5.f013b3c6.js"><link rel="prefetch" href="/assets/js/6.e2b639a4.js"><link rel="prefetch" href="/assets/js/7.36ef9f23.js"><link rel="prefetch" href="/assets/js/8.976983c0.js"><link rel="prefetch" href="/assets/js/9.9032491a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b1cbcfde.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端桃园手册</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/dt6ox9.html" class="sidebar-link">介绍</a></li><li><a href="/uc5l5a.html" class="sidebar-link">HTML</a></li><li><section class="sidebar-group depth-0"><a href="/hu5fdh.html" class="sidebar-heading clickable"><span>CSS</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/na22ae.html" class="sidebar-link">BFC</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/mrohx3.html" class="sidebar-heading clickable open"><span>JavaScript</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ny4sy0.html" class="sidebar-link">JavaScript是如何工作的</a></li><li><a href="/wndkvu.html" class="sidebar-link">原型、构造函数、实例</a></li><li><a href="/txwio3.html" class="active sidebar-link">词法环境、执行上下文、作用域、闭包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/txwio3.html#词法环境" class="sidebar-link">词法环境</a></li><li class="sidebar-sub-header"><a href="/txwio3.html#执行上下文" class="sidebar-link">执行上下文</a></li><li class="sidebar-sub-header"><a href="/txwio3.html#参考文章" class="sidebar-link">参考文章</a></li><li class="sidebar-sub-header"><a href="/txwio3.html#闭包" class="sidebar-link">闭包</a></li></ul></li><li><a href="/npo9qk.html" class="sidebar-link">ES6</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/bpv9rg.html" class="sidebar-heading clickable"><span>框架</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ikypbn.html" class="sidebar-link">Vue</a></li><li><a href="/gxcr94.html" class="sidebar-link">React</a></li></ul></section></li><li><a href="/ptoast.html" class="sidebar-link">自动化测试</a></li><li><section class="sidebar-group depth-0"><a href="/tz88n4.html" class="sidebar-heading clickable"><span>计算机通识</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/aqhnhg.html" class="sidebar-link">设计模式</a></li><li><a href="/dol4m6.html" class="sidebar-link">操作系统</a></li><li><a href="/lakekx.html" class="sidebar-link">网络</a></li><li><a href="/wrrb0y.html" class="sidebar-link">Git</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/wm8tcg.html" class="sidebar-heading clickable"><span>算法和数据结构</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/bwdihs.html" class="sidebar-link">二叉树</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/tpemfk.html" class="sidebar-heading clickable"><span>工程化</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/tfi01u.html" class="sidebar-link">Babel</a></li><li><a href="/saraly.html" class="sidebar-link">Webpack</a></li><li><a href="/xbrnpe.html" class="sidebar-link">脚手架</a></li><li><a href="/bcc99c.html" class="sidebar-link">部署</a></li><li><a href="/lr4cin.html" class="sidebar-link">埋点</a></li><li><a href="/ytk5vc.html" class="sidebar-link">监控</a></li></ul></section></li><li><a href="/wk3rnk.html" class="sidebar-link">Node</a></li><li><a href="/hg0gpt.html" class="sidebar-link">安全</a></li><li><a href="/isl5no.html" class="sidebar-link">性能优化</a></li><li><section class="sidebar-group depth-0"><a href="/stmpud.html" class="sidebar-heading clickable"><span>其他</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/fzu9u4.html" class="sidebar-link">Serverless</a></li><li><a href="/vt7k5r.html" class="sidebar-link">微前端</a></li><li><a href="/qsxi2z.html" class="sidebar-link">浏览器</a></li><li><a href="/nagu8e.html" class="sidebar-link">函数式</a></li><li><a href="/yqro45.html" class="sidebar-link">面试</a></li><li><a href="/wuodrm.html" class="sidebar-link">社区或者博客</a></li><li><a href="/fwzwt9.html" class="sidebar-link">编写可维护的代码</a></li><li><a href="/vkghcf.html" class="sidebar-link">Rxjs</a></li><li><a href="/bg9fcf.html" class="sidebar-link">Typescript</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/hh3dec.html" class="sidebar-heading clickable"><span>工具</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/lmt8ty.html" class="sidebar-link">VSCode</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="词法环境、执行上下文、作用域、闭包"><a href="#词法环境、执行上下文、作用域、闭包" class="header-anchor">#</a> 词法环境、执行上下文、作用域、闭包</h1> <div data-lake-element="root" class="lake-content-editor-core lake-engine lake-typography-traditional"><h2 id="词法环境"><a href="#词法环境" class="header-anchor">#</a> 词法环境</h2> <p data-lake-id="fe8804059a06ab57e0a9723e7a8df311" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><span data-mce-style="font-size: 15px" class="lake-fontsize-1515" style="font-size:15px;">词法环境是一种规范类型，用于定义</span><a href="http://zhoushengfe.com/es6/es6-ch.html#prod-Identifier" target="_blank"><span data-mce-style="font-size: 15px" class="lake-fontsize-1515" style="font-size:15px;">标识符(Identifier)</span></a><span data-mce-style="font-size: 15px" class="lake-fontsize-1515" style="font-size:15px;">与特定的关联，基于ECMAScript代码的词法嵌套结构的变量和函数。</span></p><p data-lake-id="b17f9ab8fd313eaa5eb75f15c37fbfdd" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><span data-mce-style="font-size: 15px" class="lake-fontsize-1515" style="font-size:15px;"><br></span></p><p data-lake-id="84154c47ba44382d7e1de99e12a4c0fe" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><span data-mce-style="font-size: 15px" class="lake-fontsize-1515" style="font-size:15px;">词法环境由环境记录和可能为 null 的外部词法环境引用组成。</span></p><p data-lake-id="f5d75efdadc4d4a8da6eddc9aa1d6ca9" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p><div data-card-type="block" data-lake-card="mindmap" id="8JO5X" data-cell_count="3"><img src="https://cdn.nlark.com/yuque/0/2020/svg/118789/1586339543557-859e051f-ee04-4703-96c5-729e3382e517.svg" height="149/"></div><p data-lake-id="39b2c6a04c0c01d07b8d07b00d4d746c" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><a href="http://zhoushengfe.com/es6/es6-ch.html#sec-environment-records" target="_blank">环境记录(Environment Record)</a><span style="color:#333333;">记录在其相关词法环境范围内创建的标识符绑定</span></p><p data-lake-id="ebbb0a3122edec5fe858b4816adb331f" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">全局环境(global environment)<span style="color:#333333;">是一个没有外部环境的词汇环境。</span></p><p data-lake-id="47df3a738e75833f6c80a417c00add50" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">全局环境的EnvironmentRecord可以用标识符绑定预先填充，并且包含一个关联的全局对象(global object)，其属性提供了一些全局环境的标识符绑定。</p><p data-lake-id="3372644556808baf5d84b91426b3ed17" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p><p data-lake-id="a1d044ef7e8c2c4eb0045eb853b3125a" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">有三种词法环境：全局环境，模块环境，函数环境。</p><p data-lake-id="14fc8a963e61253e8a8d332078b371c1" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p> <h3 id="环境记录"><a href="#环境记录" class="header-anchor">#</a> 环境记录</h3> <ul data-lake-id="ea5772172283ca9f1d8175098c8072b1" lake-indent="0" style="list-style-type:disc;margin:0px;padding-left:23px;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;"><li data-lake-id="afe0cefb1cc975235a313105f71fb0a1"><em>声明环境记录(Environment Record)</em></li><li data-lake-id="c6fae43877e2666a1d39002c3083bad6"><em>对象环境记录(object Environment Records)</em><span data-mce-style="font-size: 14px" class="lake-fontsize-14" style="color:rgb(51, 51, 51);font-size:19px;">。</span></li></ul><p data-lake-id="944e5b962cb42ef33cbd3cdce0b00e36" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">声明式环境记录用于定义ECMAScript语言句法元素的效果，例如<a href="http://zhoushengfe.com/es6/es6-ch.html#prod-FunctionDeclaration" target="_blank">FunctionDeclaration</a>s，<a href="http://zhoushengfe.com/es6/es6-ch.html#prod-VariableDeclaration" target="_blank">VariableDeclaration</a>s和<a href="http://zhoushengfe.com/es6/es6-ch.html#prod-Catch" target="_blank">Catch</a>直接将标识符绑定与ECMAScript语言值相关联的子句。</p><p data-lake-id="7059ae8e07d102d252312dec761d4822" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">对象环境记录用于定义ECMAScript元素的影响，例如<a href="http://zhoushengfe.com/es6/es6-ch.html#prod-WithStatement" target="_blank">WithStatement</a>，将标识符绑定与某些属性目的。</p><p data-lake-id="7c7f435eea022a47dc90346a4a3000b5" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p> <h4 id="声明环境记录"><a href="#声明环境记录" class="header-anchor">#</a> 声明环境记录</h4> <p data-lake-id="c98cce80b9e925451625ff726d4d8547" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">每个声明式的<a href="http://zhoushengfe.com/es6/es6-ch.html#sec-environment-records" target="_blank">环境记录(Environment Record)</a>与ECMAScript程序范围相关联，其中包含 变量(variable)，常量(constant)，let，class，module，import 和/或 函数声明(function declarations)。 </p> <h4 id="对象环境记录"><a href="#对象环境记录" class="header-anchor">#</a> 对象环境记录</h4> <p data-lake-id="88dc2d0bd4ba5b8a291f6ba5d61c3963" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">每个对象<a href="http://zhoushengfe.com/es6/es6-ch.html#sec-environment-records" target="_blank">环境记录</a>与一个被称为<em>绑定对象(binding object)</em>的对象联系在一起。比如 with 语句里面的 <code>{a: 1}</code> 。</p><p data-lake-id="3faa69048123715bbc873ef733a5f8cf" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p><div data-card-type="block" data-lake-card="codeblock" id="dnv8s"><div class="lake-codeblock-content" style="border:1px solid rgb(232, 232, 232);max-width:750px;color:rgb(89, 89, 89);margin:0px;padding:0px;background:rgb(249, 249, 249);"><div style="color:rgb(89, 89, 89);margin:0px;padding:16px;background:none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);"><div class="language-undefined extra-class"><pre class="language-text"><code>with({a:1}) {
   console.log(a)
} 
</code></pre></div></div></div></div> <h4 id="函数环境记录"><a href="#函数环境记录" class="header-anchor">#</a> 函数环境记录</h4> <p data-lake-id="d26c2663a9f69410d51db77ba1ab282c" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">函数<a href="http://zhoushengfe.com/es6/es6-ch.html#sec-environment-records" target="_blank">环境记录</a>是一个声明式的<a href="http://zhoushengfe.com/es6/es6-ch.html#sec-environment-records" target="_blank">环境记录</a>，用于表示函数的顶层范围， 如果该函数不是<a href="http://zhoushengfe.com/es6/es6-ch.html#prod-ArrowFunction" target="_blank">箭头函数</a>，则提供<code>this</code>绑定。 如果函数不是<a href="http://zhoushengfe.com/es6/es6-ch.html#prod-ArrowFunction" target="_blank">箭头函数</a>函数和引用 <code>super</code> ,其函数<a href="http://zhoushengfe.com/es6/es6-ch.html#sec-environment-records" target="_blank">环境记录</a> 还包含用于内部函数执行<code> super </code>方法的状态。</p><blockquote style="margin-top:5px;margin-bottom:5px;padding-left:1em;margin-left:0px;border-left:3px solid rgb(238, 238, 238);opacity:0.6;"><p data-lake-id="648943ad86b6dcaaa90dcfd04e40462a" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">这里证明了箭头函数其实是没有 this 的。箭头函数里面的 this 是根据作用域(或者执行环境)网上找的。</p></blockquote><p data-lake-id="790008ca7ac02a05a205b2c6956ab399" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">函数环境记录除了由于是 声明环境记录 存储的那些声明的变量，还有以下的字段，这个字段在 js 里面不能访问：</p><div data-card-type="block" data-lake-card="table" id="MW6KU"><table class="lake-table" style="outline:none;border-collapse:collapse;"><colgroup><col span="1" width="240"><col span="1" width="240"><col span="1" width="240"></colgroup><tbody><tr style="height:33px;"><td style="background-color:rgb(238, 238, 238);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default;">Field Name</td><td style="background-color:rgb(238, 238, 238);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default;">Value</td><td style="background-color:rgb(238, 238, 238);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default;">Meaning</td></tr><tr style="height:33px;"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default;">[[ThisValue]]</td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default;">Any</td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default;">这是用于此函数调用的this值.</td></tr><tr style="height:33px;"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default;">[[ThisBindingStatus]]</td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default;"><code>&quot;lexical&quot;</code> | <code>&quot;initialized&quot;</code> | <code>&quot;uninitialized&quot;</code></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default;">如果值为<code>&quot;lexical&quot;</code>，则这是<a href="http://zhoushengfe.com/es6/es6-ch.html#prod-ArrowFunction" target="_blank">ArrowFunction</a>，并且没有本地this值。</td></tr><tr style="height:33px;"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default;">[[FunctionObject]]</td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default;">Object</td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default;">函数对象被调用导致这个<a href="http://zhoushengfe.com/es6/es6-ch.html#sec-environment-records" target="_blank">Environment Record</a> 被创建。</td></tr><tr style="height:33px;"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default;">[[HomeObject]]</td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default;">Object | undefined</td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default;">如果相关函数具有<code>super</code>属性访问，并且不是<a href="http://zhoushengfe.com/es6/es6-ch.html#prod-ArrowFunction" target="_blank">ArrowFunction</a>，[[HomeObject ]]是函数绑定到一个方法的对象。 [[HomeObject]]的默认值为 undefined 。</td></tr><tr style="height:33px;"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default;">[[NewTarget]]</td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default;">Object | undefined</td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default;">如果这个<a href="http://zhoushengfe.com/es6/es6-ch.html#sec-environment-records" target="_blank">Environment Record</a> 是由[[Construct] ]内部方法创建，[[NewTarget]]是[[Construct]] newTarget 参数的值。 否则，其值为 undefined 。</td></tr></tbody></table></div> <h4 id="全局环境记录"><a href="#全局环境记录" class="header-anchor">#</a> 全局环境记录</h4> <p data-lake-id="56f094d45d2a06a903ae19cab785ef1b" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">全局环境记录最外层作用域是所有ECMAScript <a href="http://zhoushengfe.com/es6/es6-ch.html#prod-Script" target="_blank">Script</a>共享的元素。全局环境记录是一个对象环境记录的例子，他绑定了一个 global 对象。</p><p data-lake-id="d54016243958a9fc497a0f78700d2339" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><em>全局环境</em>的记录就是<em>对象环境记录</em>的一个例子。这样的记录也有关联的<em>绑定对象</em>，该对象会存储一些来自该记录的属性，但是不会存储来自其它记录的属性，反之亦然</p> <h4 id="模块环境记录"><a href="#模块环境记录" class="header-anchor">#</a> 模块环境记录</h4> <p data-lake-id="1606e8df5f9618ea20b4deb5e29cdbfe" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p> <h2 id="执行上下文"><a href="#执行上下文" class="header-anchor">#</a> 执行上下文</h2> <p data-lake-id="8e88a1d5270de6d97326e2c548bfab27" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">执行上下文是用于通过ECMAScript实现跟踪代码的运行时执行的规范设备。 在任何时间点，最多只有一个执行上下文正在执行代码。 这被称为运行执行上下文。</p><p data-lake-id="d3d0560a2a3ad998fc038de0153f83be" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><span data-mce-style="font-size: 12px" class="lake-fontsize-12" style="color:rgb(102, 102, 102);font-size:16px;"><br></span></p><p data-lake-id="f9103f15b10c1bf4c92d6d333c488dbe_p_1" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">分为两个阶段：</p><ol start="1" data-lake-id="583717f4b206cfce4476e6dbdb994ad8_ol_0" lake-indent="0" style="list-style-type:decimal;margin:0px;padding-left:23px;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;"><li data-lake-id="3289cf438c898d77a4cf621aa561b700_li_0">创建阶段</li><li data-lake-id="14700b03f551f1b25150307f696e04a2_li_1">执行阶段</li></ol><p data-lake-id="2b2b3e7dc122d1502f582c0c8b7958d8_p_2" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p><p data-lake-id="00c3ea6ee9b5631a4b1d86313e5999f9_p_3" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">创建阶段负责：</p><ol start="1" data-lake-id="2f4fcf6621102a62a5c05d86a4dab028_ol_1" lake-indent="0" style="list-style-type:decimal;margin:0px;padding-left:23px;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;"><li data-lake-id="f5a440f0f9b3fce075ec24c7c164ddad_li_2">this 的绑定</li><li data-lake-id="3efdaa4eb741da2958aee06c648f66f6_li_3">创建<strong>词法环境</strong>组件。</li><li data-lake-id="6a83346927ae57e491e745a230caf71f_li_4">创建<strong>变量环境</strong>组件。</li></ol><p data-lake-id="bc470c7bae1df4abe4f20ff41d3d3c3d_p_4" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">执行阶段<span data-mce-style="font-size: 15px" class="lake-fontsize-1515" style="color:rgb(0, 0, 0);font-size:15px;">完成对所有这些变量的分配，最后执行代码</span></p><p data-lake-id="7467903a77e4c43e92d4f196903d0bbe_p_5" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p><p data-lake-id="f23fb9c519ff30bfe03d0b2cc2cac85d_p_6" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p><p data-lake-id="b823ab4b3a235803510449b972028d1f_p_7" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">执行上下文包含三个部分：</p><ol start="1" data-lake-id="23c3e8ca06fc2f7b159297711fc5c15f_ol_2" lake-indent="0" style="list-style-type:decimal;margin:0px;padding-left:23px;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;"><li data-lake-id="3b4bb9db48054cfe432625687f2ce1a9_li_5">this </li><li data-lake-id="206bee879e0b44ccc92f971eabacc0e3_li_6">词法环境</li><li data-lake-id="b83402d734ac407580ae3d61f89dc2d6_li_7">变量环境</li></ol><p data-lake-id="92c8228235b93f7cc9ced6ac90fca3a6_p_8" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p> <h3 id="this"><a href="#this" class="header-anchor">#</a> this</h3> <p data-lake-id="c62dbb99e975a2a6a05d76df35115ed6_p_9" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">this 取决于调用者</p><p data-lake-id="042da541aac17f869693ba89ebd10d8e_p_10" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p> <h3 id="词法环境-2"><a href="#词法环境-2" class="header-anchor">#</a> 词法环境</h3> <p data-lake-id="76a9c3f82e34c0b93686fbb50bdf1c9d" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><span data-mce-style="font-size: 12px" class="lake-fontsize-12" style="color:rgb(102, 102, 102);font-size:16px;">词法环境是一种用于定义出现在上下文中的</span><em>标识符</em><span data-mce-style="font-size: 12px" class="lake-fontsize-12" style="color:rgb(102, 102, 102);font-size:16px;">与其值之间的关联的结构。每个环境有一个对</span><em>可选的父环境</em><span data-mce-style="font-size: 12px" class="lake-fontsize-12" style="color:rgb(102, 102, 102);font-size:16px;">的引用。</span></p><p data-lake-id="8907212ac05aa916eb17ff472d778a09" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><span data-mce-style="font-size: 12px" class="lake-fontsize-12" style="color:rgb(102, 102, 102);font-size:16px;"><br></span></p><p data-lake-id="7eccf52a6279b66eb3c2bb1a6febf82e" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">所以，环境就是定义在一个作用域中的变量、函数和类的<em>仓库</em>（storage）。</p><p data-lake-id="e623f28d042f5ac634d9f214dc1eea97" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p><p data-lake-id="e2fd9ca4b4d9d7a55e0362f5f0a2f96a" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p><p data-lake-id="a00924970da56ff5188f5770d3de4fad" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">从技术上讲，环境是由<em>一对**环境记录（Environment Record）</em>（一个将标识符映射到值的实际存储表）以及对父的引用（可能是<code>null</code>）组成的。</p><p data-lake-id="ddde4e0cf5a4783baf57eaeac3c20ad6_p_11" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">词法环境包括 outer 和 环境记录器</p><p data-lake-id="09a2b5671cf447a1a3529d71c89cf9e1_p_12" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p><ul data-lake-id="75edbd2a9181016fc7746dbfcaab1aca_ul_0" lake-indent="0" style="list-style-type:disc;margin:0px;padding-left:23px;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;"><li data-lake-id="a5a66a54573619098c2b61edc46df3e8_li_8"><strong>环境记录器</strong>是存储变量和函数声明的实际位置。</li><li data-lake-id="ce3749f6c16d1da0987aec52a8889d9b_li_9">outer的引用意味着它可以访问其父级词法环境</li></ul><p data-lake-id="e22578a3f10c829132c9a340c5463a7d" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p><p data-lake-id="4ec668321706334e76b51904c0163012" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><span data-mce-style="font-size: 12px" class="lake-fontsize-12" style="color:rgb(102, 102, 102);font-size:16px;">环境记录根据类型而有所不同。有</span><strong>对象</strong><span data-mce-style="font-size: 12px" class="lake-fontsize-12" style="color:rgb(102, 102, 102);font-size:16px;">环境记录和</span><strong>声明式</strong><span data-mce-style="font-size: 12px" class="lake-fontsize-12" style="color:rgb(102, 102, 102);font-size:16px;">环境记录。在声明式记录之上，还有</span><strong>函数</strong><span data-mce-style="font-size: 12px" class="lake-fontsize-12" style="color:rgb(102, 102, 102);font-size:16px;">环境记录和</span><strong>模块</strong><span data-mce-style="font-size: 12px" class="lake-fontsize-12" style="color:rgb(102, 102, 102);font-size:16px;">环境记录。每种类型的记录都有其特定的属性。不过，标识符解析的通用机制对于所有环境都是通用的，并且不依赖于记录的类型。</span></p><p data-lake-id="cdf0b67efaa81818b89b710894806122" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><span data-mce-style="font-size: 12px" class="lake-fontsize-12" style="color:rgb(102, 102, 102);font-size:16px;"><br></span></p><p data-lake-id="919cf6dd8387857621d936c0037f0a1e" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><span data-mce-style="font-size: 12px" class="lake-fontsize-12" style="color:rgb(102, 102, 102);font-size:16px;">声明环境对象：</span></p><p data-lake-id="206b6f7e8145b203229bd43635156783" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><span data-mce-style="font-size: 12px" class="lake-fontsize-12" style="color:rgba(0, 0, 0, 0.6);font-size:16px;">常见标识符绑定基本都是这个类型，例如函数定义，</span><code>var</code><span data-mce-style="font-size: 12px" class="lake-fontsize-12" style="color:rgba(0, 0, 0, 0.6);font-size:16px;">声明，</span><code>try</code><span data-mce-style="font-size: 12px" class="lake-fontsize-12" style="color:rgba(0, 0, 0, 0.6);font-size:16px;">的</span><code>catch</code><span data-mce-style="font-size: 12px" class="lake-fontsize-12" style="color:rgba(0, 0, 0, 0.6);font-size:16px;">子句</span></p><p data-lake-id="55a0c2ecdedee1c237cfa4f27ec54ab8" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><span data-mce-style="font-size: 12px" class="lake-fontsize-12" style="color:rgba(0, 0, 0, 0.6);font-size:16px;"><br></span></p> <h3 id="变量环境"><a href="#变量环境" class="header-anchor">#</a> 变量环境</h3> <p data-lake-id="165bd62dd7a47e9a6a7c8da53bb47bf0_p_13" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">它同样是一个词法环境，其环境记录器持有<strong>变量声明语句</strong>在执行上下文中创建的绑定关系。</p><p data-lake-id="7cf79ceeaaf91ef14264b4c55c1c8c1d_p_14" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p><p data-lake-id="683c701b116c0c95f5bdb63626fd6b60_p_15" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><span data-mce-style="font-size: 15px" class="lake-fontsize-1515" style="color:rgb(0, 0, 0);font-size:15px;">在 ES6 中，</span><strong>词法环境</strong><span data-mce-style="font-size: 15px" class="lake-fontsize-1515" style="color:rgb(0, 0, 0);font-size:15px;">组件和</span><strong>变量环境</strong><span data-mce-style="font-size: 15px" class="lake-fontsize-1515" style="color:rgb(0, 0, 0);font-size:15px;">的一个不同就是前者被用来存储函数声明和变量（</span><code>let</code><span data-mce-style="font-size: 15px" class="lake-fontsize-1515" style="color:rgb(0, 0, 0);font-size:15px;"> 和 </span><code>const</code><span data-mce-style="font-size: 15px" class="lake-fontsize-1515" style="color:rgb(0, 0, 0);font-size:15px;">）绑定，而后者只用来存储 </span><code>var</code><span data-mce-style="font-size: 15px" class="lake-fontsize-1515" style="color:rgb(0, 0, 0);font-size:15px;"> 变量绑定。</span></p><p data-lake-id="af127e9cf543ceb841de7d9d39534c53" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p><p data-lake-id="af127e9cf543ceb841de7d9d39534c53" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">执行环境的LexicalEnvironment和VariableEnvironment组件总是词汇环境。 当执行上下文创建时，其LexicalEnvironment和VariableEnvironment组件最初具有相同的值。</p><p data-lake-id="c3e72ce2b3aa9f0780dbe828f5682a0b" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><span data-mce-style="font-size: 15px" class="lake-fontsize-1515" style="color:rgb(0, 0, 0);font-size:15px;"><br></span></p> <h3 id="词法环境和变量环境的区别："><a href="#词法环境和变量环境的区别：" class="header-anchor">#</a> 词法环境和变量环境的区别：</h3> <p data-lake-id="0ce5cd57f2f0ee1e2d8cebee37a0e0a9" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p><div data-card-type="block" data-lake-card="codeblock" id="U9WkM"><div class="lake-codeblock-content" style="border:1px solid rgb(232, 232, 232);max-width:750px;color:rgb(89, 89, 89);margin:0px;padding:0px;background:rgb(249, 249, 249);"><div style="color:rgb(89, 89, 89);margin:0px;padding:16px;background:none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);"><div class="language-undefined extra-class"><pre class="language-text"><code> function do_something() {
   var a = 1;
    let b = 2;
    while (true) {
       var c = 3;
        let d = 4;
        console.log(b);
        break;
    }
}

do_something(); 
</code></pre></div></div></div></div><p data-lake-id="84a72f48ed1da67a52bd66efaf420d7a" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p><p data-lake-id="3f6e1268bdda9827a21721c65a6cc32d" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">当调用 <code>do_something()</code> 的时候，会创建 `<span style="color:#BD2130;">ExecutionContext` </span></p><p data-lake-id="fb22362ac53e2ddd288edfd1e38f3490" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p><div data-card-type="block" data-lake-card="codeblock" id="oWqPK"><div class="lake-codeblock-content" style="border:1px solid rgb(232, 232, 232);max-width:750px;color:rgb(89, 89, 89);margin:0px;padding:0px;background:rgb(249, 249, 249);"><div style="color:rgb(89, 89, 89);margin:0px;padding:16px;background:none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);"><div class="language-undefined extra-class"><pre class="language-text"><code>ExecutionContext:
   LexicalEnvironment:
       b -&gt; nothing
       outer: VariableEnvironment //here should VariableEnvironment
   VariableEnvironment:
       a -&gt; undefined, c -&gt; undefined
       outer: global
   ... 
</code></pre></div></div></div></div><p data-lake-id="63e0802563bb0ee8e9628be0001cb87f" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p><p data-lake-id="9fcda03fdf419e06bf2e311329a84c39" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;">当进入 while 循环的时候回创建一个新的词法环境，但不会创建变量环境，<strong>变量环境只有全局的和函数的，而词法环境包括，块级、函数、模块和全局，所以 let、const 这种块级的是放在词法环境的，而 var 声明的放在变量环境。</strong></p><p data-lake-id="ab9e18f46b400a6c79932e77c949e280" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p><div data-card-type="block" data-lake-card="codeblock" id="lhy8v"><div class="lake-codeblock-content" style="border:1px solid rgb(232, 232, 232);max-width:750px;color:rgb(89, 89, 89);margin:0px;padding:0px;background:rgb(249, 249, 249);"><div style="color:rgb(89, 89, 89);margin:0px;padding:16px;background:none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);"><div class="language-undefined extra-class"><pre class="language-text"><code>ExecutionContext:
   LexicalEnvironment:
       d -&gt; nothing
       outer:
           LexicalEnvironment
               b -&gt; 2
               outer: global
   VariableEnvironment:
       a -&gt; 1, c -&gt; undefined
       outer: global
   ... 
</code></pre></div></div></div></div><p data-lake-id="42752743bc6d3f9f6c928fb47989b8c2_p_16" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><span data-mce-style="font-size: 15px" class="lake-fontsize-1515" style="color:rgb(0, 0, 0);font-size:15px;"><br></span></p> <h2 id="参考文章"><a href="#参考文章" class="header-anchor">#</a> 参考文章</h2> <p data-lake-id="b28aeef3d1c11f4aaeec9211db7101bd_p_17" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><span data-mce-style="font-size: 15px" class="lake-fontsize-1515" style="color:rgb(0, 0, 0);font-size:15px;"><br></span><a href="https://mp.weixin.qq.com/s/IfLjuSVZorM_JT4u8Kffxg" target="_blank">https://mp.weixin.qq.com/s/IfLjuSVZorM_JT4u8Kffxg</a></p><p data-lake-id="69c7b84bd75c9073be4e1c8d0459d71c" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p> <h2 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h2> <p data-lake-id="571020864115dc9f50030b790172ee57" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><span data-mce-style="font-size: 12px" class="lake-fontsize-12" style="color:rgb(102, 102, 102);font-size:16px;">闭包</span><em>是一个函数捕获它被定义时所在的环境。这个环境被用于</em><span data-mce-style="font-size: 12px" class="lake-fontsize-12" style="color:rgb(102, 102, 102);font-size:16px;">标识符解析*。</span></p> <h3 id="作用"><a href="#作用" class="header-anchor">#</a> 作用</h3> <h4 id="实现单例模式"><a href="#实现单例模式" class="header-anchor">#</a> 实现单例模式</h4> <p data-lake-id="14ccda3774e63cf70ed934b8c81d07f2" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p><div data-card-type="block" data-lake-card="codeblock" id="FH0vy"><div class="lake-codeblock-content" style="border:1px solid rgb(232, 232, 232);max-width:750px;color:rgb(89, 89, 89);margin:0px;padding:0px;background:rgb(249, 249, 249);"><div style="color:rgb(89, 89, 89);margin:0px;padding:16px;background:none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);"><div class="language-undefined extra-class"><pre class="language-text"><code>SingleDog.getInstance = (function() {
   // 定义自由变量instance，模拟私有变量
   let instance = null
   return function() {
       // 判断自由变量是否为null
       if(!instance) {
           // 如果为null则new出唯一实例
           instance = new SingleDog()
       }
       return instance
   }
})() 
</code></pre></div></div></div></div><p data-lake-id="ab2532d97c58bea14063bceab7e5a00d" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin:0px;"><br></p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/wndkvu.html" class="prev">
        原型、构造函数、实例
      </a></span> <span class="next"><a href="/npo9qk.html">
        ES6
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4b1516c6.js" defer></script><script src="/assets/js/2.4455a399.js" defer></script><script src="/assets/js/11.2684930f.js" defer></script>
  </body>
</html>
